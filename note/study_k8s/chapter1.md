# 소프트웨어 세상의 세 가지 혁명

1. 첫 번째 혁명: 클라우드
2. 두 번째 혁명: Devops 탄생 - 데브옵스의 범위는 어디까지이고 데브옵스 환경에서의 운영이 어떻게 달라졌는가?
3. 컨테이너 등장

세 가지 변화의 물결은 클라우드 네이티브라 불리는 새로운 소프트웨어 세상을 만들고 있다. 그 세상을 위한 운영 시스템이 쿠버네티스다.

## 클라우드 혁명

1960년대 초반 메인프레임을 사용하던 시절에는 개발자들이 사용자를 대신해서 컴퓨터에 작업을 실행하고 결과를 기다렸기 때문에 사용자들은 동일한 컴퓨팅 인프라를 공유하고 사용한 프로세서 시간이나 리소스의 양에 따라 요금을 지불했다. 이상하게도 현재 처럼 들린다. 오늘날 컴퓨팅 자원 공유 방식은 클라우드라 불리며 혁명이 이루어졌다. (*혁명 revolution -> volution은 회전 운동. 소용돌이를 뜻함.)

클라우드 핵심은 컴퓨팅 리소스를 구매하는 것이다. 클라우드는 단순한 임대 원격 컴퓨팅 파워 뿐만아니라 클라우드 서비스를 임대할 수도 있다.(SaaS)

서비스를 운영하기 위해 구매하는 클라우드 인프라는 서비스형 인프라(Iaas)다. 클라우드 인프라를 구매하기 위해서는 투자 비용이 발생하지 않으며 구축과 업그레이드 또한 필요하지 않다. 전기나 물처럼 구매해 쓸 수 있는 상품과 같다.

## 데브옵스 탄생

데브옵스 이전에는 **개발자**는 소프트웨어를 작성하여 상용에서 실행하고 관리하는 **운영자**에게 전달했다. 이를 통해 개발 팀은 신속하게 새로운 기능을 제공하는 데 주력할 수 있었고, 운영 팀은 장기적이고 안정적으로 신뢰할 수 있는 서비스를 만드는데 집중했다.

클라우드의 등장으로 시스템은 더 이상 개인이 개발한 소프트웨어가 아닌 의미가 확장되었고 모든 환경적 요소가 밀접하게 연결되었다. 개발자는 소프트웨어가 나머지 시스템과 어떤 관계가 있는지 이해해야 하며 시스템 운영자는 작동 방식과 실패를 이해해야 한다. 데브옵스 운동이 이 두 그룹을 하나로 모으기 위한 시도로 시작되었다. 협업하고 이해를 공유하며 시스템 신뢰성과 소프트웨어 정확성에 대한 책임을 공유하여 팀의 확장성을 향상시키기 위함이었다.

이제 하드웨어가 클라우드에 있기 때문에 어떤 의미에서는 모든 것이 소프트웨어다. 코드형 인프라 IaC의 등장이다. 이제 개발 팀과 운영 팀은 하나가 되어 시스템을 설계하고 구축하고 모니터링하고 피드백을 제공하며 이를 바탕으로 개선을 한다.

## 쿠버네티스

쿠버네티스는 자동화, 장애 조치, 중앙 집중식 로깅, 모니터링 같이 시스템 관리자가 수행하는 작업을 한다. 또한 개발자들의 배포에 소요되는 시간과 노력을 크게 줄이며 기본적으로 롤링 업데이트로 무중단 배포를 지원한다. 카라니아 배포와 블루/그린 배포를 구현할 수 있으며 오토스케일링도 지원한다.

### 쿠버네티스는 만능이 아니다.

미래의 인프라는 모두 쿠버네티스를 기반으로 할까? 아마도 아닐 것이다. 일부 애플리케이션은 쿠버네티스에 적합하지 않다.

> 대표적으로 데이터베이스가 그렇다.
>
> 컨테이너의 소프트웨어 오케스트레이션은 상호 교환 없이 호환 가능한 새로운 인스턴스를 스핀 업 하는 것이 포함된다. 하지만 데이터베이스 레플리카는 서로 호환되지 않는다. 데이터베이스는 고유한 상태를 갖고 있으며 데이터베이스 레플리카를 배포하면 다른 노드와의 노정이 필요하고 동시에 스키마 변경과 같은 작업이 모든 곳에서 수행되어야 한다. - 숀 로젤

## 클라우드 네이티브

클라우드 네이티브는 오픈 소스 소프트웨어 기반의 클라우드, 컨테이너, 오케스트레이션을 활용한 애플리케이션과 서비스에 대한 용어로 널리 사용되고 있다. 클라우드 네이티브란 사람에 따라 다른 의미를 가질 수 있지만, 공통적으로 클라우드에서 실행된다. 단, 클라우드 컴퓨팅 인스턴스에서 실행한다고 해서 모두 클라우드 네이티브는 아니다. 클라우드 네이티브 시스템의 특징은 다음과 같다.

- 자동화
  사람 대신 자동으로 애플리케이션을 배포하고 관리하려면 일반적인 표준, 형식, 인터페이스를 따라야 한다. 쿠버네티스는 이러한 표준 인터페이스를 애플리케이션 개발자가 신경 쓸 필요가 없는 방식으로 제공한다.
- 유연성
  물리적 자원이나 컴퓨팅 노드에 대한 특정 지식과 분리되어 있어 컨테이너화된 마이크로서비스는 클러스터에서 자유롭다.
- 탄력성과 확장성
  본질적으로 분산되어 있어 다중화가 우아한 성능 고가용성을 보장한다.
- 역동성
  컨테이너 스케줄링을 통해 고가용성을 보장하고 롤링 업데이트 지원으로 무중단을 제공한다.
- 관측가능성
  클라우드 네이티브 애플리케이션은 분석 및 디버깅이 더 어렵다. 옵저버빌리티는 모니터링, 로깅, 추적, 메트릭 등으로 엔지니어의 이해를 돕는다.
- 마이크로서비스
  단순히 한 가지 일을 하는 독립적인 서비스로 구성한다. 마이크로서비스를 합치면 애플리케이션이 된다.
  단, 마이크로서비스는 만병통치약이 아니다. 모놀리스는 모든 것이 한 곳에 있어 더 이해하기 쉽고 상호작용의 추적이 용이하다. 코드 규모와 서비스에 따라 적절한 설계가 중요하다.

정리하면, 클라우드 네이티브는 클라우드 기반의 컨테이너화된 분산 시스템으로 자동화된 코드형 인프라로 동적으로 관리되는 마이크로서비스로 구성된다.
